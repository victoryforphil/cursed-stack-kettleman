language: "typescript"
type: 'application'

project:
  name: 'cursed-server'
  description: 'Server for cursed'

$schema: 'https://moonrepo.dev/schemas/tasks.json'

tasks:
  prisma-generate:
    command: 'bunx prisma generate'

  prisma-migrate:
    command: 'bunx prisma migrate dev'

  prisma-db-push:
    command: 'bunx prisma db push'

  prisma-studio:
    command: 'bunx prisma studio'

  install:
    command: 'bun install'
    deps:
    - '~:prisma-generate'

  dev:
    command: 'bun run dev'
    deps:
    - '~:install'
    options:
      cache: false

  test:
    command: 'bun test'
    inputs:
    - '@globs(typescript)'
    options:
      runInCI: true
